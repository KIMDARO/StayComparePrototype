<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StayCompare Lite</title>

  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#0a2a4a;
      --card: rgba(255,255,255,0.08);
      --card2: rgba(255,255,255,0.12);
      --border: rgba(255,255,255,0.14);
      --text:#eaf0ff;
      --muted: rgba(234,240,255,0.72);
      --accent:#7c5cff;
      --accent2:#22c55e;
      --danger:#ff4d4d;
      --shadow: 0 20px 50px rgba(0,0,0,0.35);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 20% 0%, rgba(124,92,255,0.45), transparent 55%),
        radial-gradient(900px 500px at 80% 10%, rgba(34,197,94,0.25), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }

    header{
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(10,18,32,0.55);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,0.10);
    }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 18px 18px;
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }

    .brand{
      display:flex; flex-direction:column; gap:4px;
    }

    .brand h1{
      margin:0;
      font-size:18px;
      letter-spacing:0.2px;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .badge{
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      background: rgba(124,92,255,0.18);
      border: 1px solid rgba(124,92,255,0.35);
      color: #eae4ff;
    }

    .subtitle{
      margin:0;
      font-size:12px;
      color: var(--muted);
    }

    main .wrap{ padding-top: 18px; }

    .grid{
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 16px;
      align-items:start;
    }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
    }

    .card h2{
      margin: 0 0 10px 0;
      font-size: 15px;
      letter-spacing: 0.2px;
    }

    .hint{
      margin: 0 0 14px 0;
      font-size: 12px;
      color: var(--muted);
    }

    label{
      display:block;
      font-size:12px;
      color: var(--muted);
      margin-top: 10px;
    }

    input, textarea, select{
      width:100%;
      margin-top: 6px;
      padding: 11px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.20);
      color: var(--text);
      outline: none;
    }

    input::placeholder, textarea::placeholder{
      color: rgba(234,240,255,0.45);
    }

    input:focus, textarea:focus, select:focus{
      border-color: rgba(124,92,255,0.6);
      box-shadow: 0 0 0 4px rgba(124,92,255,0.15);
    }

    textarea{ min-height: 86px; resize: vertical; }

    .row{
      display:flex;
      gap: 10px;
    }
    .row > div{ flex:1; }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
      align-items:center;
    }

    button{
      border: 0;
      border-radius: 14px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 700;
      color: #0b1220;
      background: linear-gradient(135deg, var(--accent), #9b87ff);
      transition: transform 0.06s ease, filter 0.2s ease, opacity 0.2s ease;
    }
    button:hover{ filter: brightness(1.06); }
    button:active{ transform: translateY(1px); }

    button.secondary{
      color: var(--text);
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.14);
    }

    button.ghost{
      color: var(--text);
      background: transparent;
      border: 1px solid rgba(255,255,255,0.18);
    }
    button.ghost:hover{
      background: rgba(255,255,255,0.08);
    }

    button.danger{
      color: white;
      background: linear-gradient(135deg, var(--danger), #ff7a7a);
    }

    .toolbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .toolbar-left{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }

    .toggle{
      display:flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color: var(--muted);
      user-select:none;
    }

    .toggle input{ width:16px; height:16px; margin:0; }

    .list{
      display:flex;
      flex-direction:column;
      gap: 12px;
      margin-top: 12px;
    }

    .stay{
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: 16px;
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
    }

    .stay h3{
      margin:0;
      font-size: 15px;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap: wrap;
    }

    .pill{
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      background: rgba(34,197,94,0.18);
      border: 1px solid rgba(34,197,94,0.30);
      color: #d8ffe7;
    }

    .muted{
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
    }

    .price{
      font-size: 18px;
      font-weight: 900;
      margin-top: 10px;
    }

    .links{
      display:flex;
      gap: 12px;
      flex-wrap:wrap;
      margin-top: 8px;
    }

    a{
      color: #d9d3ff;
      text-decoration:none;
      font-size: 12px;
      border-bottom: 1px dashed rgba(217,211,255,0.45);
      padding-bottom: 2px;
    }
    a:hover{ opacity:0.9; }

    .right{
      display:flex;
      gap: 8px;
      align-items:start;
      justify-content:flex-end;
      flex-wrap: wrap;
    }

    .empty{
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
      opacity: 0.9;
    }

    footer{
      text-align:center;
      color: rgba(234,240,255,0.55);
      font-size: 12px;
      padding: 18px;
    }

    @media(max-width: 920px){
      .grid{ grid-template-columns: 1fr; }
    }

    /* Print styles */
    @media print {
      header, .no-print { display:none !important; }
      body { background: white; color: #111; }
      .card, .stay { box-shadow: none !important; border: 1px solid #ddd !important; background: white !important; }
      a { color: #111 !important; border-bottom: none !important; }
      .pill, .badge { border: 1px solid #ddd !important; background: #f5f5f5 !important; color: #111 !important; }
    }
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <h1>StayCompare Lite <span class="badge">Startup prototype</span></h1>
        <p class="subtitle">Add options â€¢ Compare total cost â€¢ Shortlist â€¢ Search images â€¢ Print to PDF</p>
      </div>
      <div class="no-print" style="font-size:12px; color:var(--muted);">
        Local-only â€¢ Saves automatically
      </div>
    </div>
  </div>
</header>

<main>
  <div class="wrap">
    <div class="grid">

      <!-- ADD FORM -->
      <section class="card">
        <h2>Add a stay</h2>
        <p class="hint">Keep it simple: name, location, and cost. Add link/notes if you want.</p>

        <form id="stayForm" class="no-print">
          <label>Stay name</label>
          <input id="name" required placeholder="e.g., City Centre Apartment" />

          <label>Location</label>
          <input id="location" placeholder="e.g., Exeter" />

          <div class="row">
            <div>
              <label>Nightly rate (Â£)</label>
              <input id="nightlyRate" type="number" min="0" step="0.01" required placeholder="50" />
            </div>
            <div>
              <label>Nights</label>
              <input id="nights" type="number" min="1" step="1" required placeholder="3" />
            </div>
          </div>

          <label>Fees (Â£)</label>
          <input id="fees" type="number" min="0" step="0.01" value="0" />

          <label>Link (optional)</label>
          <input id="link" type="url" placeholder="https://..." />

          <label>Notes (optional)</label>
          <textarea id="notes" placeholder="Commute, amenities, pros/cons..."></textarea>

          <div class="actions">
            <button type="submit">Add stay</button>
            <button type="button" id="clearAll" class="secondary">Clear all</button>
          </div>
        </form>
      </section>

      <!-- COMPARE LIST -->
      <section class="card">
        <div class="toolbar no-print">
          <div class="toolbar-left">
            <label style="margin:0; color:var(--muted); font-size:12px;">Sort</label>
            <select id="sortBy" style="width:auto; min-width: 170px;">
              <option value="cheap">Cheapest total</option>
              <option value="expensive">Most expensive total</option>
              <option value="name">Name Aâ€“Z</option>
            </select>

            <label class="toggle">
              <input type="checkbox" id="onlyFav" />
              Show shortlisted only
            </label>
          </div>

          <button id="printBtn" class="ghost" type="button">Print / Save as PDF</button>
        </div>

        <div id="list" class="list"></div>
        <div id="empty" class="empty" style="display:none;">No stays yet â€” add one on the left ðŸ‘ˆ</div>
      </section>

    </div>

    <footer class="no-print">
      Built with HTML/CSS/JS â€¢ Stored in your browser (LocalStorage)
    </footer>
  </div>
</main>

<script>
  const LS_KEY = "staycompare_stays_startup_v1";

  function loadStays() {
    try { return JSON.parse(localStorage.getItem(LS_KEY)) || []; }
    catch { return []; }
  }

  function saveStays(stays) {
    localStorage.setItem(LS_KEY, JSON.stringify(stays));
  }

  function money(n) {
    return "Â£" + (Number(n || 0)).toFixed(2);
  }

  function escapeHtml(str) {
    return String(str || "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function totalCost(stay) {
    return (Number(stay.nightlyRate) * Number(stay.nights)) + Number(stay.fees || 0);
  }

  function uid() {
    return Math.random().toString(16).slice(2) + Date.now().toString(16);
  }

  let stays = loadStays();

  const form = document.getElementById("stayForm");
  const listEl = document.getElementById("list");
  const emptyEl = document.getElementById("empty");
  const sortByEl = document.getElementById("sortBy");
  const printBtn = document.getElementById("printBtn");
  const clearAllBtn = document.getElementById("clearAll");
  const onlyFavEl = document.getElementById("onlyFav");

  function render() {
    listEl.innerHTML = "";

    const sortBy = sortByEl.value;
    let items = stays.slice();

    if (onlyFavEl.checked) {
      items = items.filter(s => s.favourite);
    }

    if (sortBy === "cheap") items.sort((a,b) => totalCost(a) - totalCost(b));
    if (sortBy === "expensive") items.sort((a,b) => totalCost(b) - totalCost(a));
    if (sortBy === "name") items.sort((a,b) => (a.name || "").localeCompare(b.name || ""));

    emptyEl.style.display = items.length === 0 ? "block" : "none";

    items.forEach((stay) => {
      const div = document.createElement("div");
      div.className = "stay";

      const q = encodeURIComponent(`${stay.name} ${stay.location}`);

      div.innerHTML = `
        <div>
          <h3>
            ${escapeHtml(stay.name)}
            ${stay.favourite ? '<span class="pill">Shortlisted</span>' : ''}
          </h3>

          <div class="muted">
            ${stay.location ? escapeHtml(stay.location) + " â€¢ " : ""}
            ${money(stay.nightlyRate)} / night â€¢ ${stay.nights} nights â€¢ Fees ${money(stay.fees || 0)}
          </div>

          <div class="price">
            ${money(totalCost(stay))}
            <span class="muted" style="font-weight:normal;"> total</span>
          </div>

          <div class="links">
            ${stay.link ? `<a href="${stay.link}" target="_blank" rel="noopener">Open link</a>` : ""}
            <a href="https://www.google.com/search?tbm=isch&q=${q}" target="_blank" rel="noopener">
              Search images
            </a>
          </div>

          ${stay.notes ? `<div class="muted">${escapeHtml(stay.notes)}</div>` : ""}
        </div>

        <div class="right no-print">
          <button class="secondary" data-action="fav" data-id="${stay.id}">
            ${stay.favourite ? "Unshortlist" : "Shortlist"}
          </button>
          <button class="danger" data-action="del" data-id="${stay.id}">Delete</button>
        </div>
      `;

      listEl.appendChild(div);
    });
  }

  // shortlist/delete buttons
  listEl.addEventListener("click", (e) => {
    const btn = e.target.closest("button");
    if (!btn) return;

    const action = btn.getAttribute("data-action");
    const id = btn.getAttribute("data-id");

    const idx = stays.findIndex(s => s.id === id);
    if (idx === -1) return;

    if (action === "del") {
      stays.splice(idx, 1);
    } else if (action === "fav") {
      stays[idx].favourite = !stays[idx].favourite;
    }

    saveStays(stays);
    render();
  });

  // add stay
  form.addEventListener("submit", (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const location = document.getElementById("location").value.trim();
    const nightlyRate = Number(document.getElementById("nightlyRate").value);
    const nights = Number(document.getElementById("nights").value);
    const fees = Number(document.getElementById("fees").value || 0);
    const link = document.getElementById("link").value.trim();
    const notes = document.getElementById("notes").value.trim();

    if (!name) { alert("Please enter a Stay name."); return; }
    if (!nightlyRate || !nights) { alert("Please enter Nightly rate and Nights."); return; }

    stays.push({
      id: uid(),
      name,
      location,
      nightlyRate,
      nights,
      fees,
      link,
      notes,
      favourite: false
    });

    saveStays(stays);
    form.reset();
    document.getElementById("fees").value = 0;
    render();
  });

  // clear all
  clearAllBtn.addEventListener("click", () => {
    if (!confirm("Clear all saved stays?")) return;
    stays = [];
    saveStays(stays);
    render();
  });

  // sort / print / toggle
  sortByEl.addEventListener("change", render);
  onlyFavEl.addEventListener("change", render);
  printBtn.addEventListener("click", () => window.print());

  render();
</script>
</body>
</html>
